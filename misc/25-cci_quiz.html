<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Questionnaire — 25-cci</title>
<style>
    :root {
        --bg: #fafafa;
        --card: #ffffff;
        --border: #e6e6e6;
        --text: #111;
        --muted: #666;
        --accent: #1f4aff;
    }
    body {
        font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica, Arial, sans-serif;
        margin: 0; padding: 0; background: var(--bg); color: var(--text);
    }
    .container { max-width: 900px; margin: 24px auto; padding: 0 16px; }
    header {
        background: var(--card); border: 1px solid var(--border); border-radius: 12px;
        padding: 20px; margin-bottom: 20px; box-shadow: 0 1px 2px rgba(0,0,0,0.04);
    }
    header h1 { margin: 0 0 8px; font-size: 1.4rem; }
    header p { margin: 0; color: var(--muted); }
    .identity-grid {
        display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; margin-top: 16px;
    }
    .identity-grid input {
        width: 100%; padding: 10px; border: 1px solid var(--border); border-radius: 10px; font-size: 0.95rem;
        background: #fff;
    }
    .question-card {
        background: var(--card); border: 1px solid var(--border);
        border-radius: 12px; padding: 16px; margin-bottom: 16px;
    }
    .q-header { display: flex; align-items: baseline; gap: 8px; margin-bottom: 8px; }
    .q-number { font-weight: 700; }
    .q-type { color: var(--muted); font-size: 0.9rem; }
    .q-text { margin: 8px 0 12px; line-height: 1.5; white-space: pre-wrap; }
    .choices { display: grid; gap: 8px; }
    .choice input { margin-right: 8px; }
    .no-choices { color: var(--muted); font-style: italic; }
    textarea.open-answer {
        width: 100%; padding: 10px; border: 1px solid var(--border); border-radius: 10px; font-size: 0.95rem; resize: vertical;
        background: #fff;
    }
    .footer-actions {
        display: flex; gap: 12px; justify-content: flex-end; align-items: center; margin-top: 24px;
    }
    button.primary {
        background: var(--accent); color: white; border: none; padding: 12px 16px; border-radius: 10px; font-size: 1rem; cursor: pointer;
    }
    button.primary:hover { filter: brightness(0.96); }
    .note { color: var(--muted); font-size: 0.9rem; }
</style>
</head>
<body>
<div class="container">
    <header>
        <h1>Questionnaire</h1>
        <p>Fichier source&nbsp;: <strong>25-cci</strong></p>
        <div class="identity-grid">
            <input id="student_name" type="text" placeholder="Nom" autocomplete="family-name">
            <input id="student_firstname" type="text" placeholder="Prénom" autocomplete="given-name">
            <input id="student_email" type="email" placeholder="Email" autocomplete="email">
        </div>
    </header>

    
                    <section class="question-card" data-qid="q_1" data-type="MCQ" data-correct="3">
                        <div class="q-header">
                            <div class="q-number">Question 1</div>
                            <div class="q-type">MCQ</div>
                        </div>
                        <div class="q-text">Dé équilibré (1 à 6). Quelle est l’espérance de X (le résultat du lancer) ?</div>
                        <div class="choices">
                            
                        <label class="choice">
                            <input type="radio" name="q_1" value="1">
                            <span class="choice-text">3</span>
                        </label>
                        
                        <label class="choice">
                            <input type="radio" name="q_1" value="2">
                            <span class="choice-text">4</span>
                        </label>
                        
                        <label class="choice">
                            <input type="radio" name="q_1" value="3">
                            <span class="choice-text">3,5</span>
                        </label>
                        
                        <label class="choice">
                            <input type="radio" name="q_1" value="4">
                            <span class="choice-text">21</span>
                        </label>
                        
                        </div>
                    </section>
                    

                    <section class="question-card" data-qid="q_2" data-type="MCQ" data-correct="4">
                        <div class="q-header">
                            <div class="q-number">Question 2</div>
                            <div class="q-type">MCQ</div>
                        </div>
                        <div class="q-text">Soit X suivant une loi Binomiale de paramètres (n,p). On rappelle que X correspond au nombre de succès, lorsqu’on fait n expériences indépendantes, de probabilité de succès p. Laquelle est correcte ?</div>
                        <div class="choices">
                            
                        <label class="choice">
                            <input type="radio" name="q_2" value="1">
                            <span class="choice-text">E[X]=p et Var(X)=n</span>
                        </label>
                        
                        <label class="choice">
                            <input type="radio" name="q_2" value="2">
                            <span class="choice-text">E[X]=np et Var(X)=p(1-p)</span>
                        </label>
                        
                        <label class="choice">
                            <input type="radio" name="q_2" value="3">
                            <span class="choice-text">E[X]=n et Var(X)=np</span>
                        </label>
                        
                        <label class="choice">
                            <input type="radio" name="q_2" value="4">
                            <span class="choice-text">E[X]=np et Var(X)=np(1-p)</span>
                        </label>
                        
                        </div>
                    </section>
                    

                    <section class="question-card" data-qid="q_3" data-type="MCQ" data-correct="2">
                        <div class="q-header">
                            <div class="q-number">Question 3</div>
                            <div class="q-type">MCQ</div>
                        </div>
                        <div class="q-text">Deux événements A et B sont incompatibles (ne peuvent pas arriver ensemble) et P(A), P(B) &gt; 0. Peut-on conclure qu’ils sont indépendants ?</div>
                        <div class="choices">
                            
                        <label class="choice">
                            <input type="radio" name="q_3" value="1">
                            <span class="choice-text">Oui</span>
                        </label>
                        
                        <label class="choice">
                            <input type="radio" name="q_3" value="2">
                            <span class="choice-text">Non</span>
                        </label>
                        
                        </div>
                    </section>
                    

                    <section class="question-card" data-qid="q_4" data-type="MCQ" data-correct="3">
                        <div class="q-header">
                            <div class="q-number">Question 4</div>
                            <div class="q-type">MCQ</div>
                        </div>
                        <div class="q-text">Variables continues X,Y de densité conjointe p_{X,Y}. Quelle est la bonne expression de P(a≤X≤b, c≤Y≤d) ?</div>
                        <div class="choices">
                            
                        <label class="choice">
                            <input type="radio" name="q_4" value="1">
                            <span class="choice-text">F_X(b)-F_X(a)</span>
                        </label>
                        
                        <label class="choice">
                            <input type="radio" name="q_4" value="2">
                            <span class="choice-text">F_Y(d)-F_Y(c)</span>
                        </label>
                        
                        <label class="choice">
                            <input type="radio" name="q_4" value="3">
                            <span class="choice-text">∫_a^b ∫_c^d f_{X,Y}(x,y) dy dx</span>
                        </label>
                        
                        <label class="choice">
                            <input type="radio" name="q_4" value="4">
                            <span class="choice-text">f_{X,Y}(b,d)-f_{X,Y}(a,c)</span>
                        </label>
                        
                        </div>
                    </section>
                    

                    <section class="question-card" data-qid="q_5" data-type="MCQ" data-correct="2">
                        <div class="q-header">
                            <div class="q-number">Question 5</div>
                            <div class="q-type">MCQ</div>
                        </div>
                        <div class="q-text">Variable continue de densité p(x). Laquelle est vraie ?</div>
                        <div class="choices">
                            
                        <label class="choice">
                            <input type="radio" name="q_5" value="1">
                            <span class="choice-text">P(X=a)=p(a)</span>
                        </label>
                        
                        <label class="choice">
                            <input type="radio" name="q_5" value="2">
                            <span class="choice-text">P(X=a)=0 même si p(a)&gt;0</span>
                        </label>
                        
                        <label class="choice">
                            <input type="radio" name="q_5" value="3">
                            <span class="choice-text">P(a≤X≤b)=p(b)-p(a)</span>
                        </label>
                        
                        <label class="choice">
                            <input type="radio" name="q_5" value="4">
                            <span class="choice-text">P(a≤X≤b)=0</span>
                        </label>
                        
                        </div>
                    </section>
                    

                    <section class="question-card" data-qid="q_6" data-type="MCQ" data-correct="4">
                        <div class="q-header">
                            <div class="q-number">Question 6</div>
                            <div class="q-type">MCQ</div>
                        </div>
                        <div class="q-text">Régression simple Y = w0 + w1 X + ε. Lien entre pente estimée ŵ1, corrélation r_XY et écarts-types s_X, s_Y ?</div>
                        <div class="choices">
                            
                        <label class="choice">
                            <input type="radio" name="q_6" value="1">
                            <span class="choice-text">ŵ1 = r_XY</span>
                        </label>
                        
                        <label class="choice">
                            <input type="radio" name="q_6" value="2">
                            <span class="choice-text">ŵ1 = s_X / s_Y</span>
                        </label>
                        
                        <label class="choice">
                            <input type="radio" name="q_6" value="3">
                            <span class="choice-text">ŵ1 = Cov(X,Y)</span>
                        </label>
                        
                        <label class="choice">
                            <input type="radio" name="q_6" value="4">
                            <span class="choice-text">ŵ1 = r_XY · (s_Y / s_X)</span>
                        </label>
                        
                        </div>
                    </section>
                    

                    <section class="question-card" data-qid="q_7" data-type="MCQ" data-correct="2">
                        <div class="q-header">
                            <div class="q-number">Question 7</div>
                            <div class="q-type">MCQ</div>
                        </div>
                        <div class="q-text">Minimiser Σ(y_i−ŷ_i)² ou (1/n)·Σ(y_i−ŷ_i)² conduit-il au même estimateur (même argmin) ?</div>
                        <div class="choices">
                            
                        <label class="choice">
                            <input type="radio" name="q_7" value="1">
                            <span class="choice-text">Non</span>
                        </label>
                        
                        <label class="choice">
                            <input type="radio" name="q_7" value="2">
                            <span class="choice-text">Oui</span>
                        </label>
                        
                        <label class="choice">
                            <input type="radio" name="q_7" value="3">
                            <span class="choice-text">Oui seulement si n est grand</span>
                        </label>
                        
                        <label class="choice">
                            <input type="radio" name="q_7" value="4">
                            <span class="choice-text">Non car l’un est biaisé</span>
                        </label>
                        
                        </div>
                    </section>
                    

                    <section class="question-card" data-qid="q_8" data-type="MCQ" data-correct="1">
                        <div class="q-header">
                            <div class="q-number">Question 8</div>
                            <div class="q-type">MCQ</div>
                        </div>
                        <div class="q-text">Avec n observations et d régresseurs (attributs) + intercept (ordonnée à l’origine), la taille de la matrice de design Φ est :</div>
                        <div class="choices">
                            
                        <label class="choice">
                            <input type="radio" name="q_8" value="1">
                            <span class="choice-text">n × (d+1)</span>
                        </label>
                        
                        <label class="choice">
                            <input type="radio" name="q_8" value="2">
                            <span class="choice-text">n × d</span>
                        </label>
                        
                        <label class="choice">
                            <input type="radio" name="q_8" value="3">
                            <span class="choice-text">(d+1) × (d+1)</span>
                        </label>
                        
                        <label class="choice">
                            <input type="radio" name="q_8" value="4">
                            <span class="choice-text">d × n</span>
                        </label>
                        
                        </div>
                    </section>
                    

                    <section class="question-card" data-qid="q_9" data-type="MCQ" data-correct="4">
                        <div class="q-header">
                            <div class="q-number">Question 9</div>
                            <div class="q-type">MCQ</div>
                        </div>
                        <div class="q-text">En régression linéaire, avec d variables explicatives et n échantillons, combien de coefficients sont estimés ?</div>
                        <div class="choices">
                            
                        <label class="choice">
                            <input type="radio" name="q_9" value="1">
                            <span class="choice-text">d</span>
                        </label>
                        
                        <label class="choice">
                            <input type="radio" name="q_9" value="2">
                            <span class="choice-text">n</span>
                        </label>
                        
                        <label class="choice">
                            <input type="radio" name="q_9" value="3">
                            <span class="choice-text">n − d</span>
                        </label>
                        
                        <label class="choice">
                            <input type="radio" name="q_9" value="4">
                            <span class="choice-text">d + 1</span>
                        </label>
                        
                        </div>
                    </section>
                    

                    <section class="question-card" data-qid="q_10" data-type="MCQ" data-correct="4">
                        <div class="q-header">
                            <div class="q-number">Question 10</div>
                            <div class="q-type">MCQ</div>
                        </div>
                        <div class="q-text">Indiquer un cas où ΦᵀΦ est clairement non inversible </div>
                        <div class="choices">
                            
                        <label class="choice">
                            <input type="radio" name="q_10" value="1">
                            <span class="choice-text">Erreurs gaussiennes</span>
                        </label>
                        
                        <label class="choice">
                            <input type="radio" name="q_10" value="2">
                            <span class="choice-text">Variance des erreurs finie</span>
                        </label>
                        
                        <label class="choice">
                            <input type="radio" name="q_10" value="3">
                            <span class="choice-text">Moyenne des erreurs nulle</span>
                        </label>
                        
                        <label class="choice">
                            <input type="radio" name="q_10" value="4">
                            <span class="choice-text">n &lt; d + 1</span>
                        </label>
                        
                        </div>
                    </section>
                    

                    <section class="question-card" data-qid="q_11" data-type="MCQ" data-correct="2">
                        <div class="q-header">
                            <div class="q-number">Question 11</div>
                            <div class="q-type">MCQ</div>
                        </div>
                        <div class="q-text">Test de nullité d’un coefficient (H0 : w_j^* = 0). Sous normalité et homoscédasticité, la statistique de test suit une loi :</div>
                        <div class="choices">
                            
                        <label class="choice">
                            <input type="radio" name="q_11" value="1">
                            <span class="choice-text">Khi-deux</span>
                        </label>
                        
                        <label class="choice">
                            <input type="radio" name="q_11" value="2">
                            <span class="choice-text">Student avec n − (d + 1) degrés de libertés (ddl)</span>
                        </label>
                        
                        <label class="choice">
                            <input type="radio" name="q_11" value="3">
                            <span class="choice-text">Normale centrée réduite</span>
                        </label>
                        
                        <label class="choice">
                            <input type="radio" name="q_11" value="4">
                            <span class="choice-text">Fisher-Snedecor</span>
                        </label>
                        
                        </div>
                    </section>
                    

                    <section class="question-card" data-qid="q_12" data-type="MCQ" data-correct="3">
                        <div class="q-header">
                            <div class="q-number">Question 12</div>
                            <div class="q-type">MCQ</div>
                        </div>
                        <div class="q-text">Soit SE(ŵ_j) l’estimation de l’écart type de w_j^*. On note z_a et t_a les quantiles de niveau “a” de la loi normale et de la loi de Student à (n-d-1) degrés de liberté. Un IC à 95% pour w_j^* (sous normalité et homoscédasticité) est :</div>
                        <div class="choices">
                            
                        <label class="choice">
                            <input type="radio" name="q_12" value="1">
                            <span class="choice-text">ŵ_j ± 1,96 · σ</span>
                        </label>
                        
                        <label class="choice">
                            <input type="radio" name="q_12" value="2">
                            <span class="choice-text">Toujours ŵ_j ± 2 · SE(ŵ_j)</span>
                        </label>
                        
                        <label class="choice">
                            <input type="radio" name="q_12" value="3">
                            <span class="choice-text">ŵ_j ± t_{0,975} · SE(ŵ_j)</span>
                        </label>
                        
                        <label class="choice">
                            <input type="radio" name="q_12" value="4">
                            <span class="choice-text">ŵ_j ± z_{0,975} · SE(ŵ_j)</span>
                        </label>
                        
                        </div>
                    </section>
                    

                    <section class="question-card" data-qid="q_13" data-type="MCQ" data-correct="1">
                        <div class="q-header">
                            <div class="q-number">Question 13</div>
                            <div class="q-type">MCQ</div>
                        </div>
                        <div class="q-text">IC à 99% pour w_j^* : quel quantile utiliser ?</div>
                        <div class="choices">
                            
                        <label class="choice">
                            <input type="radio" name="q_13" value="1">
                            <span class="choice-text">t_{0,995}</span>
                        </label>
                        
                        <label class="choice">
                            <input type="radio" name="q_13" value="2">
                            <span class="choice-text">t_{0,99}</span>
                        </label>
                        
                        <label class="choice">
                            <input type="radio" name="q_13" value="3">
                            <span class="choice-text">z_{0,99}</span>
                        </label>
                        
                        <label class="choice">
                            <input type="radio" name="q_13" value="4">
                            <span class="choice-text">z_{0,995}</span>
                        </label>
                        
                        </div>
                    </section>
                    

                <section class="question-card" data-qid="q_14" data-type="open" data-correct="La moyenne empirique de v.a. iid converge vers l’espérance.">
                    <div class="q-header">
                        <div class="q-number">Question 14</div>
                        <div class="q-type">Open</div>
                    </div>
                    <div class="q-text">Loi des grands nombres : énoncer le théorème, en français, de la manière la plus précise possible (l’écriture mathématique est autorisée, mais pas exigée)</div>
                    <textarea name="q_14" class="open-answer" rows="4" placeholder="Votre réponse..."></textarea>
                </section>
                

                <section class="question-card" data-qid="q_15" data-type="open" data-correct="Il est plus court.">
                    <div class="q-header">
                        <div class="q-number">Question 15</div>
                        <div class="q-type">Open</div>
                    </div>
                    <div class="q-text">Modèle de Bernoulli — Quel est l’avantage de l’intervalle de confiance asymptotique par rapport à celui obtenu par l’inégalité de Chebychev ?</div>
                    <textarea name="q_15" class="open-answer" rows="4" placeholder="Votre réponse..."></textarea>
                </section>
                

                <section class="question-card" data-qid="q_16" data-type="open" data-correct="On effectue un sondage afin de collecter les heures de révisions de chacun. On effectue une régression linéaire. On calcule la statistique de test de l’hypothèse que w_1^*=0. Elle suit une loi de Student. On calcule la p-valeur associée à ce test. Si la p-valeur est inférieure à un seuil fixé (par exemple 5%), on rejette H0.">
                    <div class="q-header">
                        <div class="q-number">Question 16</div>
                        <div class="q-type">Open</div>
                    </div>
                    <div class="q-text">On collecte les notes reçues à un examen, et le nombre d’heure de révision de chaque étudiant. On veut savoir s’il y a un lien entre la note et le temps de révision. Expliquer en français, mais le plus précisément possible, votre méthodologie, pour répondre à cette question.</div>
                    <textarea name="q_16" class="open-answer" rows="4" placeholder="Votre réponse..."></textarea>
                </section>
                

                <section class="question-card" data-qid="q_17" data-type="open" data-correct="P(A|B) = P(B|A)P(A)/P(B) ou P(B|A) = P(A|B)P(B)/P(A)">
                    <div class="q-header">
                        <div class="q-number">Question 17</div>
                        <div class="q-type">Open</div>
                    </div>
                    <div class="q-text">Ecrire la formule de Bayes</div>
                    <textarea name="q_17" class="open-answer" rows="4" placeholder="Votre réponse..."></textarea>
                </section>
                

                <section class="question-card" data-qid="q_18" data-type="open" data-correct="0">
                    <div class="q-header">
                        <div class="q-number">Question 18</div>
                        <div class="q-type">Open</div>
                    </div>
                    <div class="q-text">La prévalence d’une maladie (c’est à dire la proportion de personnes malades) est de 2%. On fait un test de dépistage. On sait que pour une personne malade, la probabilité d’être testé positif est 95%. Le taux de faux positifs est de 10%. En utilisant la formule de Bayes, évaluez au centième près la probabilité qu’une personne testée positive soit malade.</div>
                    <textarea name="q_18" class="open-answer" rows="4" placeholder="Votre réponse..."></textarea>
                </section>
                

                <section class="question-card" data-qid="q_19" data-type="open" data-correct="Pi/4 ou 0.78 ou 0.79">
                    <div class="q-header">
                        <div class="q-number">Question 19</div>
                        <div class="q-type">Open</div>
                    </div>
                    <div class="q-text">On choisit au hasard un point dans le carré unité [0,1]x[0,1], selon la loi uniforme. Quelle est la probabilité qu’il tombe dans le disque unité ?</div>
                    <textarea name="q_19" class="open-answer" rows="4" placeholder="Votre réponse..."></textarea>
                </section>
                

    <div class="footer-actions">
        <span class="note">Quand vous avez terminé, exportez vos réponses en CSV.</span>
        <button class="primary" id="downloadCsvBtn">Télécharger le CSV</button>
    </div>
</div>

<script>
(function() {
    const EXCEL_BASE = "25-cci";

    function pad(n) { return String(n).padStart(2, '0'); }
    function timestamp() {
        const d = new Date();
        const yyyy = d.getFullYear();
        const mm = pad(d.getMonth()+1);
        const dd = pad(d.getDate());
        const hh = pad(d.getHours());
        const mi = pad(d.getMinutes());
        const ss = pad(d.getSeconds());
        return `${yyyy}${mm}${dd}_${hh}${mi}${ss}`;
    }
    function sanitize(s) {
        return (s || '').replace(/\s+/g, '_').replace(/[^A-Za-z0-9_\-]/g, '');
    }
    function csvEscape(value) {
        const s = (value == null ? '' : String(value));
        const escaped = s.replaceAll('"', '""');
        return `"${escaped}"`;
    }

    function collectRows() {
        const name = document.getElementById('student_name').value.trim();
        const first = document.getElementById('student_firstname').value.trim();
        const email = document.getElementById('student_email').value.trim();

        const cards = Array.from(document.querySelectorAll('.question-card'));
        const rows = [];

        // En-tête CSV
        rows.push([
            'name','first_name','email','timestamp','question_index','type','title',
            'answer_index_or_text','answer_text','correct_index','choices'
        ]);

        cards.forEach((card, idx) => {
            const qIndex = idx + 1;
            const qType = card.getAttribute('data-type') || '';
            const correct = card.getAttribute('data-correct') || '';
            const title = (card.querySelector('.q-text')?.textContent || '').trim();

            let ansIndexOrText = '';
            let ansText = '';
            let choices = [];

            if (qType.toLowerCase() === 'mcq') {
                // Récupère les choix visibles de cette carte
                const labels = Array.from(card.querySelectorAll('.choice'));
                labels.forEach((lab) => {
                    const t = (lab.querySelector('.choice-text')?.textContent || '').trim();
                    choices.push(t);
                });
                // Réponse sélectionnée (si existante)
                const checked = card.querySelector('input[type="radio"]:checked');
                if (checked) {
                    ansIndexOrText = checked.value; // index 1..N
                    const idx = parseInt(ansIndexOrText, 10) - 1;
                    if (idx >= 0 && idx < choices.length) {
                        ansText = choices[idx];
                    }
                }
            } else {
                const area = card.querySelector('textarea.open-answer');
                ansIndexOrText = area ? area.value.trim() : '';
                ansText = ansIndexOrText;
            }

            rows.push([
                name, first, email, new Date().toISOString(), String(qIndex), qType, title,
                ansIndexOrText, ansText, correct, choices.join(' | ')
            ]);
        });

        return rows;
    }

    function rowsToCsv(rows) {
        return rows.map(row => row.map(csvEscape).join(',')).join('\r\n');
    }

    function downloadCsv() {
        const name = document.getElementById('student_name').value.trim();
        const first = document.getElementById('student_firstname').value.trim();
        const email = document.getElementById('student_email').value.trim();

        if (!name || !first || !email) {
            if (!confirm('Nom, Prénom ou Email est vide. Continuer quand même ?')) {
                return;
            }
        }

        const rows = collectRows();
        const csv = rowsToCsv(rows);

        // Prépare un Blob + lien "download" => propose le téléchargement au navigateur
        const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
        const url = URL.createObjectURL(blob);

        const safeName = sanitize(name) || 'noname';
        const safeFirst = sanitize(first) || 'nofirst';
        const fname = `${safeName}_${safeFirst}_${EXCEL_BASE}_${timestamp()}.csv`;

        const a = document.createElement('a');
        a.href = url;
        a.download = fname;  // Demande un téléchargement (pas d’enregistrement local silencieux)
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
    }

    document.getElementById('downloadCsvBtn').addEventListener('click', downloadCsv);
})();
</script>
</body>
</html>
